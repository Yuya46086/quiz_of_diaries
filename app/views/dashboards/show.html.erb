<h1><%= current_user.username %>さんようこそ!</h1>

<div class="dashboard-content">
  <div class="diary-section">
    <h2>日記の操作</h2>
    <div class="diary-actions">
      <%= link_to "日記を書く", new_post_path, class: "action-button" %>
      <%= link_to "日記一覧を見る", posts_path, class: "action-button" %>
    </div>

  <hr>

  <div class="quiz-section">
    <h2>クイズに挑戦</h2>

    <div class="quiz-challenge">
      <%# @remaining_quiz_count はコントローラーで計算済み %>
      <% if @remaining_quiz_count > 0 %>
        <p class="challenge-status">まだ挑戦できるクイズが **<%= @remaining_quiz_count %>** 個あります！</p>
        <%# new_quiz_attempt_path はクイズ挑戦画面へのルーティング %>
        <%= link_to "新しいクイズに挑戦！", new_quiz_attempt_path, class: "big-button primary-color" %>
      <% else %>
        <p class="challenge-status">挑戦できるクイズは全て解き終わりました！</p>
        <%= link_to '新しい日記を投稿する', new_post_path, class: "action-button secondary-color" %>
      <% end %>
      <p>（挑戦したクイズは、しばらく出題されません）</p>
    </div>

    <div class="user-stats">
      <h4>合計獲得スコア</h4>
      <p class="score-display">
        <%= current_user.total_score %>点
      </p>
    </div>
    <div class="score-navigation">
      <%= link_to "挑戦履歴を見る", quiz_attempts_path, class: "action-button" %>
      <%= link_to "ランキングを見る", ranking_path, class: "action-button primary-color" %>
    </div>
  </div>

</div>