<h1>日記一覧</h1>
<div class="postsIndex__header">
  <%= link_to '日記を書く', new_post_path, class: 'action-button' %>
</div>

<hr>

<div class="postsIndex__monthNavigaion">
  <h2><%= Time.zone.local(@selected_year, @selected_month).strftime("%Y年%m月") %></h2>
  
  <div class="month-selector">
    <% @available_months.each do |month_info| %>
      
      <% is_active = (month_info[:year] == @selected_year && month_info[:month] == @selected_month) %>
      
      <%= link_to month_info[:display], 
                  posts_path(year: month_info[:year], month: month_info[:month]),
                  class: "month-link #{'active' if is_active}" %>
                  
    <% end %>
  </div>
</div>

<div class="postsIndex__list">
  <% if @posts.any? %>
   <% @posts.each do |post| %>
    <div class="postsIndex__postCard">
      <%= link_to post_path(post), class: "postsIndex__link" do %>
        <div class="postsIndex__date">
          <% if post.post_date.present? %>
            <%= post.post_date.strftime("%Y年%m月%d日") %>
          <% else %>
            日付未設定
          <% end %>
        </div>
        <div class="postsIndex__contentPreview">
          <%# 日記本文の冒頭のみを表示 %>
          <p><%= post.content.truncate(50) %></p>
        </div>
      <% end %>
    </div>
   <% end %>
  <% else %>
    <p>まだ日記がありません。<%= link_to '最初の日記を投稿してみましょう', new_post_path %></p>
  <% end %>
</div>